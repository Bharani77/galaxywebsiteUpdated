(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{1971:(e,t,r)=>{Promise.resolve().then(r.bind(r,182))},6046:(e,t,r)=>{"use strict";var n=r(6658);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},182:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n=r(5155),s=r(2115),a=r(6046);let i=(0,r(5974).UU)("https://sarsafeqetopciqjhzrt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNhcnNhZmVxZXRvcGNpcWpoenJ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzIzNTAwOTEsImV4cCI6MjA0NzkyNjA5MX0.cvIbQn7UbCrvjDVzA4-bB-UCsHM9gp9i1uVFWtPlH9c");function l(){let[e,t]=(0,s.useState)(""),[r,l]=(0,s.useState)(""),[u,o]=(0,s.useState)(""),[c,d]=(0,s.useState)(null),[p,h]=(0,s.useState)(!1),f=(0,a.useRouter)();(0,s.useEffect)(()=>{h(!0)},[]);let m=e=>{d(e),setTimeout(()=>d(null),3e3)},g=async e=>{try{let{data:t,error:r}=await i.from("tokengenerate").select("*").eq("token",e);if(r)return m("Token verification failed. Please try again."),!1;if(!t||0===t.length)return m("Invalid token provided."),!1;t.length>1&&console.warn("Multiple tokens found for the same token value. Using the first one.");let n=t[0];if("InUse"===n.status)return m("Token has already been used."),!1;return!0}catch(e){return m("An unexpected error occurred during token verification."),!1}},b=async(e,t)=>{try{let{error:r}=await i.from("tokengenerate").update({userid:t}).eq("token",e).select();if(r){m("Error associating token with user.");return}}catch(e){m("Error associating token with user.")}},x=async n=>{if(n.preventDefault(),!e.trim()||!r.trim()){m("Username and password cannot be empty.");return}if(!u.trim()){m("Token cannot be empty.");return}try{if(!await g(u))return;let{data:n,error:s}=await i.from("users").insert([{username:e,password:r,token:u}]).select().single();if(s&&"23505"===s.code){m("Username already taken. Please try a different one.");return}if(s)m("Error: "+(s.message||"Failed to create user"));else{let e=n.id;await b(u,e);let{error:r}=await i.from("tokengenerate").update({status:"InUse"}).eq("token",u);r&&m("Error updating token status."),m("Signup successful!"),t(""),l(""),o(""),f.push("/")}}catch(e){m("An unexpected error occurred.")}};return(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-purple-900 to-violet-600 flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-lg p-8 rounded-xl shadow-xl max-w-md w-full",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-white text-center mb-8",children:"Galaxy KickLock SignUp"}),p&&c&&(0,n.jsx)("div",{className:"mb-4 p-3 bg-blue-500/20 text-white rounded-lg text-center",children:c}),(0,n.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-white mb-2",children:"Username"}),(0,n.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-2 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter username"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-white mb-2",children:"Password"}),(0,n.jsx)("input",{type:"password",value:r,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter password"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-white mb-2",children:"Token"}),(0,n.jsx)("input",{type:"text",value:u,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter token"})]}),(0,n.jsx)("button",{type:"submit",className:"w-full py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition duration-200",children:"Sign Up"})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[736,441,517,358],()=>t(1971)),_N_E=e.O()}]);