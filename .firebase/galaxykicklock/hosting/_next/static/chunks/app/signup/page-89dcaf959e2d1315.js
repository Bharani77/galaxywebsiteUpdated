(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{1971:(e,t,n)=>{Promise.resolve().then(n.bind(n,182))},6046:(e,t,n)=>{"use strict";var s=n(6658);n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}}),n.o(s,"useSearchParams")&&n.d(t,{useSearchParams:function(){return s.useSearchParams}})},182:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var s=n(5155),a=n(2115),r=n(6046);let o=(0,n(5974).UU)("https://sarsafeqetopciqjhzrt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNhcnNhZmVxZXRvcGNpcWpoenJ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzIzNTAwOTEsImV4cCI6MjA0NzkyNjA5MX0.cvIbQn7UbCrvjDVzA4-bB-UCsHM9gp9i1uVFWtPlH9c");function i(){let[e,t]=(0,a.useState)(""),[n,i]=(0,a.useState)(""),[l,u]=(0,a.useState)(""),[c,d]=(0,a.useState)(null),[m,h]=(0,a.useState)(!1),p=(0,r.useRouter)();(0,a.useEffect)(()=>{h(!0)},[]);let f=e=>{d(e),setTimeout(()=>d(null),3e3)},b=async e=>{try{let{data:t,error:n}=await o.from("tokengenerate").select("*").eq("token",e);if(n)return f("Token verification failed. Please try again."),!1;if(!t||0===t.length)return f("Invalid token provided."),!1;t.length>1&&console.warn("Multiple tokens found for the same token value. Using the first one.");let s=t[0];if("InUse"===s.status)return f("Token has already been used."),!1;return!0}catch(e){return f("An unexpected error occurred during token verification."),!1}},g=async(e,t)=>{try{let{error:n}=await o.from("tokengenerate").update({userid:t}).eq("token",e).select();if(n){f("Error associating token with user.");return}}catch(e){f("Error associating token with user.")}},x=async s=>{if(s.preventDefault(),!e.trim()||!n.trim()){f("Username and password cannot be empty.");return}if(!l.trim()){f("Token cannot be empty.");return}try{if(!await b(l))return;let{data:s,error:a}=await o.from("users").insert([{username:e,password:n,token:l}]).select().single();if(a&&"23505"===a.code){f("Username already taken. Please try a different one.");return}if(a)f("Error: "+(a.message||"Failed to create user"));else{let e=s.id;await g(l,e);let{error:n}=await o.from("tokengenerate").update({status:"InUse"}).eq("token",l);n&&f("Error updating token status."),f("Signup successful!"),t(""),i(""),u(""),p.push("/")}}catch(e){f("An unexpected error occurred.")}};return(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-gray-800 p-8 rounded-lg shadow-md w-96",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white mb-4 text-center",children:"Sign Up"}),m&&c&&(0,s.jsx)("div",{className:"fixed bottom-4 right-4 px-4 py-2 rounded-lg shadow-lg ".concat(c.includes("Error")||c.includes("Invalid")||c.includes("empty")?"bg-red-600":"bg-green-600"," text-white"),children:c}),(0,s.jsxs)("form",{onSubmit:x,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"username",className:"block text-white text-sm font-bold mb-2",children:"Username:"}),(0,s.jsx)("input",{type:"text",id:"username",name:"username",value:e,onChange:e=>t(e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-white text-sm font-bold mb-2",children:"Password:"}),(0,s.jsx)("input",{type:"password",id:"password",name:"password",value:n,onChange:e=>i(e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"token",className:"block text-white text-sm font-bold mb-2",children:"Token:"}),(0,s.jsx)("input",{type:"text",id:"token",name:"token",value:l,onChange:e=>u(e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full",children:"Sign Up"})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[736,441,517,358],()=>t(1971)),_N_E=e.O()}]);